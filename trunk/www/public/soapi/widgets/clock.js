SOAPI.widgets.clock=function(p){new SOAPI.Clock(p);};SOAPI.Clock=SOAPI.Widget.extension();SOAPI.Clock.extend({wtype:"clock",draggable:true,seconds:true,timer:null,setup:function(parameters){var result=this.callParent(arguments.callee,"setup",arguments);var p=result.p;var w=result.w;var handlers=SOAPI.Clock_Handlers;w.dragger.enabled=true;w.oncontextmenu=function(){return false;};SOAPI.Event.addEventHandler(w,"mousedown",handlers.onMouseDown,"Clock");return result;},configure:function(){this.displayTime();},pad:function(number,places){var str=number.toString();if(str.length>places)return number.toPrecision(places);while(str.length<places)str='0'+str;return str;},displayTime:function(){function timer(clock){return function(){clock.displayTime();};}var now=new Date();var offset=now.getTimezoneOffset();var now=new Date(now-(offset*60*1000));var hours=this.pad(Math.floor(now.getHours()),2);var minutes=this.pad(Math.floor(now.getMinutes()),2);var seconds=this.pad(Math.floor(now.getSeconds()),2);this.innerHTML=""+hours+":"+minutes+((this.seconds)?":"+seconds:"");this.timer=setTimeout(timer(this),500);}});SOAPI.Clock_Handlers={onMouseDown:function(event){if(SOAPI.Event.button==SOAPI.Event.RIGHT){this.seconds=!this.seconds;event.stopPropagation();clearTimeout(this.timer);this.displayTime();}return true;}};