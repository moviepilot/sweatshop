SOAPI.widgets.desktop=function(p){new SOAPI.Desktop(p);};SOAPI.Desktop=SOAPI.Widget.extension();SOAPI.Desktop.extend({wtype:"desktop",ctypes:{taskbar:SOAPI.Panel},parameters:SOAPI.merge(SOAPI.Widget.prototype.parameters,{taskbar:"top"}),setup:function(parameters){var result=this.callParent(arguments.callee,"setup",arguments);var p=result.p;var w=result.w;var c=w.components;var workspace=c.workspace=this.createComponent({element:p.element,parent:w,cType:"workspace"},true);var taskbar=c.taskbar=this.createComponent({element:p.element,parent:w,cType:"taskbar"});var c=taskbar.components;var content=c.content=this.createComponent({element:taskbar,parent:taskbar,cType:"content"},true);if(p.pieces&4096){var c=w.components;var wallpaper=c.wallpaper=this.createComponent({element:p.element,parent:w,cType:"wallpaper"});if(p.pieces&8192){wallpaper.components=c={};c.filler=this.createComponent({element:wallpaper,parent:wallpaper,widget:w,cType:"filler",eType:"img"});}}if(p.pieces&16384){var c=w.components;var overlay=c.overlay=this.createComponent({element:p.element,parent:w,cType:"overlay"});if(p.pieces&32768){overlay.components=c={};c.filler=this.createComponent({element:overlay,parent:overlay,widget:w,cType:"filler",eType:"img"});}}if(p.pieces&65536){var c=w.components;var logo=c.logo=this.createComponent({element:p.element,parent:w,cType:"logo"});if(p.pieces&131072){logo.components=c={};c.filler=this.createComponent({element:logo,parent:logo,widget:w,cType:"filler",eType:"img"});}}return result;},recalculateWorkspace:function(){var taskbar=this.components.taskbar;var workspace=this.components.workspace;var position=this.getAttribute("taskbar");var size=(position=="top"||position=="bottom")?taskbar.get("ActualHeight"):taskbar.get("ActualWidth");workspace.styleTo({top:0,bottom:0,left:0,right:0});workspace.styleTo(position,size);}});