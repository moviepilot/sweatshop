SOAPI.Validator={NO_FILTER:0,UPPERCASE:1,LOWERCASE:2,ALPHABETIC:3,NUMERIC:4,ALPHANUMERIC:7,ALL:7,definitions:{},addDefinition:function(name,parameters){var p={filters:this.NO_FILTER,custom:"",description:"",actionBefore:null,actionAfter:null};for(var pName in parameters)p[pName]=parameters[pName];this.definitions[name]=p;},validateKey:function(object,event,definition,maxlength){var e=event.event;var keyCode=e.keyCode;var charCode=e.charCode||e.keyCode;if(!keyCode&&!charCode)return true;if((opera&&(!e.which||keyCode==16||keyCode==17))||(!ie&&!opera&&(keyCode==8||keyCode==9||keyCode==35||keyCode==36||keyCode==46||(keyCode>=37&&keyCode<=40)||(charCode==120&&e.ctrlKey)||(charCode==99&&e.ctrlKey)))){return true;}if((charCode==118&&e.ctrlKey)){function validate(object,definition,maxlength){return function(){object.value=SOAPI.Validator.validateText(object.value,definition,maxlength);}}this.timer=setTimeout(validate(object,definition,maxlength),0);return true;}var selectionStart=object.selectionStart;var selectionEnd=object.selectionEnd;if(object.value.length>=maxlength&&(ie||selectionStart==selectionEnd)){event.preventDefault();return 0;}var keyChar=String.fromCharCode(charCode);var newKeyChar=this.validateText(keyChar,definition);if(!newKeyChar){event.preventDefault();return false;}if(ie){if(newKeyChar!=keyChar)e.keyCode=newKeyChar.charCodeAt(0);return true;}if(newKeyChar!=keyChar){object.value=object.value.substring(0,selectionStart)+newKeyChar+object.value.substring(selectionEnd);object.setSelectionRange(selectionStart+newKeyChar.length,selectionStart+newKeyChar.length);event.preventDefault();}return true;},validateText:function(text,definition,maxlength){var definition=this.definitions[definition];if(!definition)return text;if(definition.actionBefore)text=this.executeAction(definition.actionBefore,text);var validText="";for(var i=0;i<text.length;i++){var charCode=text.charCodeAt(i);if((((definition.filters&this.UPPERCASE)==this.UPPERCASE)&&(charCode>64&&charCode<91))||(((definition.filters&this.LOWERCASE)==this.LOWERCASE)&&(charCode>96&&charCode<123))||(((definition.filters&this.NUMERIC)==this.NUMERIC)&&(charCode>47&&charCode<58))||(definition.custom.indexOf(text.charAt(i))!==-1)){validText+=text.charAt(i);}}if(definition.actionAfter)validText=this.executeAction(definition.actionAfter,validText);return(maxlength)?validText.substring(0,maxlength):validText;},executeAction:function(action,data){if(isFunction(action))return action(data);if(isString(action))eval(action);if(isArray(action)){for(var key in action)eval(action[key]);}return data;}};